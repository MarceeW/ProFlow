<div class="container">
  <div class="mat-headline-4 pt-3 mb-3">{{team()?.name + ' '}}<b>settings</b></div>
  <mat-divider></mat-divider>
  <div class="edit-settings-container">
    <div class="member-container">
      <div class="title">
        Team members:
      </div>
      @let members = team()?.members ?? [];
      @if(members.length == 0) {
        This team has no members yet!
      }
      @for(member of members; track $index) {
        @let isMarkedToRemove = isMemberMarkedToRemove(member);
        <div class="member" [class.marked-to-remove]="isMarkedToRemove">
          {{member.fullName}}
          <div class="member-remove-icon-container">
            <mat-icon
              (click)="onRemoveClicked(member)"
              [matTooltip]="isMarkedToRemove ?
                'Undo member remove' : 'Remove member from the team'">
              {{isMarkedToRemove ? 'undo' : 'close'}}
            </mat-icon>
          </div>
        </div>
      }
    </div>
    <mat-form-field>
      <app-member-search-control [notAllowedMembers]="members ?? []" [formControl]="memberControl"/>
    </mat-form-field>
  </div>
  <button
    mat-flat-button color="primary"
    (click)="onSave()"
    [disabled]="!canSaveHappen()">Save changes</button>
</div>
